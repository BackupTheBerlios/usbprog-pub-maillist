<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Usbprog-pub] usbprog - firmware wechseln unter Windows
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/usbprog-pub/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:usbprog-pub%40lists.berlios.de?Subject=Re%3A%20%5BUsbprog-pub%5D%20usbprog%20-%20firmware%20wechseln%20unter%20Windows&In-Reply-To=%3C000001c7af8d%24aa8f3530%241404a8c0%40heimnetz.xx%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000074.html">
   <LINK REL="Next"  HREF="000079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Usbprog-pub] usbprog - firmware wechseln unter Windows</H1>
    <B>Frank Ulbrich</B> 
    <A HREF="mailto:usbprog-pub%40lists.berlios.de?Subject=Re%3A%20%5BUsbprog-pub%5D%20usbprog%20-%20firmware%20wechseln%20unter%20Windows&In-Reply-To=%3C000001c7af8d%24aa8f3530%241404a8c0%40heimnetz.xx%3E"
       TITLE="[Usbprog-pub] usbprog - firmware wechseln unter Windows">frank.ulbrich at gmx.net
       </A><BR>
    <I>Fri Jun 15 22:42:14 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000074.html">[Usbprog-pub] usbprog - firmware wechseln unter Windows
</A></li>
        <LI>Next message: <A HREF="000079.html">[Usbprog-pub] usbprog - firmware wechseln unter Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76">[ date ]</a>
              <a href="thread.html#76">[ thread ]</a>
              <a href="subject.html#76">[ subject ]</a>
              <a href="author.html#76">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hallo,
danke fuer den TIP, auf der Webseite waren 2 hfuse genannt 0xd8 und 0xd9.
Ich habe mein hfuse nun aus 0xd9 angepasst. Leider klappt es mit dem 
Updatemodusumschaltung noch immer nicht per dem Prog usbprog  ... gibt es
eine Zeitspanne, in der das Programm gestartet werden mu&#223;, damit
umgeschaltet
werden kann ?
Z.B inneralb von 15s nach dem Aufstecken auf den USB-Bus oder 1s ?

Gruss Frank


-----Urspr&#252;ngliche Nachricht-----
Von: Benedikt Sauter [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/usbprog-pub">sauter at sistecs.de</A>] 
Gesendet: Freitag, 15. Juni 2007 09:48
An: mes; 'Frank Ulbrich'; <A HREF="https://lists.berlios.de/mailman/listinfo/usbprog-pub">usbprog-pub at lists.berlios.de</A>
Betreff: Re: AW: [Usbprog-pub] usbprog - firmware wechseln unter Windows


Hallo,

bin gerade in den Endz&#252;gen meiner Diplomarbeit, drum kann ich leider nicht
so mitreden.

F&#252;r den Bootloader muss hfuse auf 0xd9!!!!! stehen.

Das ganze Funktioniert so.
Jede Firmware von usbprog muss einen soganannten Vendor Request anbieten,
mit dem man das Ger&#228;t in den Update Modus versetzen kann.

Um diesen Vendor Request an das Ger&#228;t senden zu k&#246;nnen braucht man einen
Treiber.

Wir die Firmware &#252;ber einen externen Treiber angesteuert, wie im Fall vom
AVRISP mk2 und dem AVR Studio Treiber,  dann kann ich &#252;ber diesen Treiber
eine Verbindung aufbauen aber daf&#252;r ist unbedingt dieser Filter Treiber von
der libusb notwendigt. Sonst kann man sich da nicht &quot;andocken&quot;.

Anders ist es wiederum wenn man das Blinkdemo, oder nur den Update Modus
drauf hat, da muss man eine libusb .inf Datei f&#252;r das Ger&#228;t erzeugen das man
darauf zugreifen kann.  Leider ist da Windows so umst&#228;ndlich. In Linux kann
man mit der libusb einfach auf jedes Ger&#228;t zugreifen, egal ob es spezielle
Treiber daf&#252;r gibt die geladen sind.

Kam das einigermassen rueber was das Problem ist, warum das immer so eine
Wissenschaft ist?

Gruss Bene


















Am 15.6.2007 schrieb &quot;mes&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/usbprog-pub">usbprog at mestro.de</A>&gt;:

&gt;<i>Moin,
</I>&gt;<i>
</I>&gt;<i>Frank schrieb:
</I>&gt;<i>
</I>&gt;&gt;<i>ja, ich bin auc weitergekommen. Was passiert aber, wenn ich das 
</I>&gt;&gt;<i>&quot;Blikdemo&quot; auf meinen usbprog brenne? Ich kann mir nicht vorstellen, 
</I>&gt;&gt;<i>da&#223; AV Studio dann den &quot;Blinker&quot; in den Updatemodus setzen kann. Ich 
</I>&gt;&gt;<i>denke es ist wichtig, dass die Prozedur mit &quot;usbprog firmware.bin&quot; 
</I>&gt;&gt;<i>funktoniert.
</I>&gt;<i>
</I>&gt;<i>Hmm, ich habe auch schon &#252;berlegt. Theoretisch m&#252;ssten die befehle, die 
</I>&gt;<i>an den usbprog gesendet werden m&#252;ssen, um in den bootloadermodus zu 
</I>&gt;<i>kommen doch immer unterschiedlich sein, da sie von der aktiven firmware 
</I>&gt;<i>abh&#228;ngen.
</I>&gt;<i>
</I>&gt;&gt;<i>Hast Du denn andere bits als lfuse 0xe0 und hfuse 0xd8  gesetzt?
</I>&gt;<i>
</I>&gt;<i>- Die Sicherungsbits, so dass der Bootloader nicht beschrieben und 
</I>&gt;<i>ausgelesen werden kann.
</I>&gt;<i>- High Byte: 0xD8 wobei die 8 wohl das wichtigere ist (Bootloader)
</I>&gt;<i>- Low Byte: 0xE0 wobei die 0 das wichtigere ist (Clock Source)
</I>&gt;<i>
</I>&gt;&gt;<i>Aber bei Dir geht ja der Weg &#252;ber &quot;usbprog firmware.bin&quot; auch nicht 
</I>&gt;&gt;<i>oder?
</I>&gt;<i>
</I>&gt;<i>Doch, mittlerweile sogar komplett ohne Administratoren-Rechte. Aber 
</I>&gt;<i>vorsichtshalber ja nur mit dem avrispmk2.bin
</I>&gt;<i>
</I>&gt;<i>Wie's von der (z.B.) Blinkdemo zur&#252;ck in den Bootloader geht, fehlt mir 
</I>&gt;<i>noch.
</I>&gt;<i>
</I>&gt;<i>Gr&#252;&#223;e,
</I>&gt;<i>mes
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000074.html">[Usbprog-pub] usbprog - firmware wechseln unter Windows
</A></li>
	<LI>Next message: <A HREF="000079.html">[Usbprog-pub] usbprog - firmware wechseln unter Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76">[ date ]</a>
              <a href="thread.html#76">[ thread ]</a>
              <a href="subject.html#76">[ subject ]</a>
              <a href="author.html#76">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/usbprog-pub">More information about the Usbprog-pub
mailing list</a><br>
</body></html>
